---
- tgt: write
- init:
  commands:
  - set pipes out JSON stdout out bytes stderr in JSON stdin
  - set pipein out bytes stderr in JSON stdin
  - set pipeout out JSON stdout out bytes stderr
  - run loader pipeout program files2object omin offset_min.json omax offset_max.json rad :[[0.1]] imagename imagename.json seed seed.json colormap colormap.json modelname modelname.json count :50000 bitdepth :16 mapsize :900
  - wait_data omin omax rad imagename seed colormap
- generate-init: init
  commands:
  - launch generate pipes program generatechanges
- generate:
  - init
  - generate-init
  commands:
  - feed generate input seed seed input count count input rad radius_min input rad radius_max input omin offset_min input omax offset_max
  - close generate
  - wait_data changes
- render-init: init
  commands:
  - launch render pipes program renderchanges
- render:
  - render-init
  - generate
  commands:
  - feed render input mapsize size input changes changes
  - close render
  - wait_data heightfield
- convert-init: init
  commands:
  - launch color pipes program heightfield2color
  - launch model pipes program heightfield2model
- convert:
  - convert-init
  - render
  commands:
  - feed model input heightfield heightfield
  - feed color input heightfield heightfield input colormap colormap
  - close color model
  - wait_data image vertices tristrips
- write-init: init
  commands:
  - launch write pipein program writeimage
  - launch wrmodel pipein program writecollada
- write:
  - write-init
  - convert
  commands:
  - feed write input imagename filename input bitdepth depth input image image
  - feed wrmodel input modelname filename input vertices vertices input tristrips tristrips
  - close write wrmodel
  - wait_process 60 write wrmodel
